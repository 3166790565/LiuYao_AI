<div align="center">

# 🔮 AI易学分析系统

**版本：1.6.0**

*结合人工智能与传统易学预测术的现代化应用程序*

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey.svg)]()
[![AI](https://img.shields.io/badge/AI-GPT--4%20%7C%20Claude-orange.svg)]()
[![RAG](https://img.shields.io/badge/RAG-Enhanced-purple.svg)](docs/RAG_优化总结.md)

</div>

---

## 📖 项目介绍

AI易学分析系统是一个结合人工智能与传统易学预测术的现代化应用程序。系统通过AI分析用户的问题，提取关键需求方面，并结合各种易学体系（六爻、奇门遁甲、大六壬、金口诀、八字、河洛理数、玄空择日、紫微斗数、梅花易数、太乙神数等）进行专业解读，为用户提供全面的分析结果。

### 🌐相关链接

- [点击观看视频演示](https://www.bilibili.com/video/BV1XnxbzQEoH?t=1.7)
- [点击下载配套软件（玄奥六爻破解版）](https://wwme.lanzouq.com/iPVGB37olnva)

### 🚀 技术亮点

- **🤖 AI驱动**: 集成多种大语言模型（GPT-4.1、GPT-4、GPT-4o等）
- **📚 RAG增强**: 基于传统易学文献的检索增强生成技术
- **🎨 现代UI**: iOS风格界面设计，流畅动画效果
- **⚡ 高性能**: 优化的检索算法，毫秒级响应
- **🔄 实时更新**: 智能文档监控，自动数据库更新

> 📋 **技术详解**: [RAG检索增强技术文档](docs/RAG_优化总结.md) - 深入了解我们的核心技术实现

## ✨ 功能特点

### 🎯 核心功能
- 🎨 **现代化UI设计**: iOS风格界面，流畅动画效果
- 🧠 **智能问题分析**: AI自动提取用户问题中的关键需求
- 📚 **RAG检索增强**: 基于传统易学文献的智能检索，显著提升解卦准确性
- 💬 **连续对话模式**: 支持多轮对话，深度解读分析
- 📄 **结果导出**: 支持PDF/Word格式导出分析结果

### 🔮 易学体系支持
<details>
<summary>点击展开支持的易学体系</summary>

- 🎯 **六爻预测** - 传统占卜预测
- ⭐ **奇门遁甲** - 时空预测学
- 🌊 **大六壬** - 古代三式之一
- 🗣️ **金口诀** - 快速预测法
- 📅 **八字命理** - 生辰八字分析
- 🔢 **河洛理数** - 数理预测
- 🏠 **玄空择日** - 风水择吉
- ⭐ **紫微斗数** - 星象命理
- 🌸 **梅花易数** - 象数预测
- 🌟 **太乙神数** - 古代三式之一

</details>

### 🤖 AI模型支持
- **GPT系列**: GPT-4.1、GPT-4、GPT-4o、GPT-4o-mini
- **Claude系列**: 支持Anthropic Claude模型
- **自定义模型**: 支持用户自定义AI模型配置

### ⚡ 性能特性
- 🚀 **高速检索**: 毫秒级文档检索响应
- 💾 **智能缓存**: LRU缓存策略，重复查询瞬时响应
- 🔄 **自动更新**: 文档变化自动检测，智能增量更新
- 🌐 **网络优化**: 请求缓存，网络异常自动重试

## 🛠️ 技术栈

### 后端技术
- **🐍 Python 3.8+**: 主要开发语言
- **🤖 AI集成**: OpenAI GPT、Anthropic Claude
- **📚 NLP处理**: jieba分词、Sentence Transformers
- **🔍 检索技术**: TF-IDF、BM25、向量检索
- **📊 数据处理**: NumPy、SciPy、scikit-learn
- **💾 数据存储**: Pickle序列化、JSON配置

### 前端技术
- **🖥️ GUI框架**: Tkinter (Python内置)
- **🎨 UI设计**: 自定义iOS风格组件
- **✨ 动画效果**: 自研动画引擎
- **📱 响应式**: 自适应布局设计

### 核心算法
- **🔍 RAG检索**: 检索增强生成
- **📈 TF-IDF**: 词频-逆文档频率
- **🎯 BM25**: 改进的TF-IDF算法
- **🧠 向量检索**: FAISS高效相似度搜索
- **🔄 增量更新**: 智能文档变化检测

### 开发工具
- **📦 依赖管理**: pip + requirements.txt
- **🔧 代码质量**: 模块化设计、类型提示
- **📝 文档**: Markdown技术文档
- **🚀 部署**: PyInstaller打包

## 📋 系统要求

- **Python**: 3.8+ 版本
- **内存**: 建议 4GB+ RAM
- **存储**: 至少 2GB 可用空间
- **网络**: 稳定的互联网连接（用于AI接口调用）
- **操作系统**: Windows 10+、macOS 10.14+、Linux

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 首次运行

1. 安装依赖包：

```bash
pip install -r requirements.txt
```

2. 运行主程序：

```bash
python main.py
```

**注意**：首次运行时，系统会自动检测`docx/`文件夹中的易学文献，并构建RAG检索数据库。这个过程可能需要几分钟时间，请耐心等待。

### 日常使用

1. 启动程序后，系统会自动检查文档是否有更新
2. 如有新增或修改的文档，会自动重建数据库
3. 在输入框中输入您的问题
4. 选择合适的AI模型和易学体系
5. 点击"开始分析"按钮
6. 等待系统分析完成，查看卦象信息和解读结果
7. 可以使用"解读咨询"功能进行进一步的对话交流

### RAG检索功能

- 系统会根据您的问题自动检索相关的传统易学文献
- 检索结果会融入AI分析过程，提升解卦的准确性和专业性
- 支持的文档格式：`.docx`、`.txt`
- 文档放置位置：项目根目录下的`docx/`文件夹
- 不支持`.doc`格式文件，请先转换到`.docx`格式

#### RAG检索配置

**匹配度阈值设置**：
- 默认匹配度阈值：`0.5`
- 修改方法：在 `gui/app.py` 文件的 `perform_analysis` 函数中，找到以下代码行：
  ```python
  similarity_threshold=0.5
  ```
  将 `0.5` 修改为您需要的阈值（范围：0.0-1.0）
- 阈值说明：
  - 0.0：返回所有相关结果（可能包含不相关内容）
  - 0.3：较宽松的匹配（推荐用于获取更多参考）
  - 0.5：平衡的匹配（默认设置）
  - 0.7：严格的匹配（仅返回高度相关的内容）
  - 1.0：完全匹配（可能无结果）
## 📁 项目结构

```
AI六爻/
├── 📄 main.py                    # 🚀 主程序入口
├── 📁 src/                       # 📦 核心源码模块
│   ├── __init__.py
│   ├── build_database.py         # 🏗️ 数据库构建模块
│   ├── search_documents.py       # 🔍 文档搜索模块
│   ├── incremental_update.py     # 🔄 增量更新模块
│   └── prompts.py                # 💬 提示词模块
├── 📁 gui/                       # 🖥️ GUI界面模块
│   ├── __init__.py
│   ├── app.py                    # 🎨 主界面
│   ├── components/               # 🧩 UI组件
│   └── styles/                   # 🎭 样式文件
├── 📁 utils/                     # 🛠️ 工具模块
│   ├── __init__.py
│   ├── logger.py                 # 📝 日志工具
│   ├── file_monitor.py           # 👁️ 文件监控
│   └── history.py                # 📚 历史记录
├── 📁 config/                    # ⚙️ 配置文件
│   ├── __init__.py
│   └── constants.py              # 🔧 常量配置
├── 📁 data/                      # 💾 数据文件
│   ├── __init__.py
│   ├── file_cache.json           # 📋 文件缓存
│   └── history.json              # 📖 历史数据
├── 📁 scripts/                   # 📜 脚本工具
│   ├── __init__.py
│   └── clear_cache.bat           # 🧹 缓存清理
├── 📁 docs/                      # 📚 技术文档
│   ├── __init__.py
│   └── RAG_优化总结.md            # 📋 技术详解
├── 📁 resources/                 # 📦 资源文件
│   ├── documents/                # 📜 易学文档
│   └── database/                 # 🗄️ 数据库文件
├── 📁 .github/                   # 🔧 GitHub配置
│   └── workflows/                # ⚡ CI/CD工作流
├── 📄 requirements.txt           # 📋 Python依赖
├── 📄 requirements_vector.txt    # 🧠 向量依赖
├── 📄 .gitignore                 # 🚫 Git忽略规则
└── 📄 README.md                  # 📖 项目说明
```

## 注意事项

- 分析过程可能需要一些时间，请耐心等待
- 确保网络连接稳定，以便正常调用AI接口
- 解读结果仅供参考，请理性看待
- 首次运行时会自动下载所需的资源文件

## 版本信息

当前版本：1.6.0

### 更新日志

#### v1.6.0
- **新增RAG检索增强功能**：基于传统易学文献的智能检索系统，显著提升解卦准确性
- **智能文档监控**：自动检测docx文件夹变化，智能更新数据库，无需手动重建
- **多格式文档支持**：支持.docx、.txt等多种文档格式的自动处理
- **高效文本索引**：采用TF-IDF和BM25算法进行文档索引，提升检索效率
- **中文分词优化**：集成jieba分词引擎，支持智能关键词提取
- **启动流程优化**：集成文件变化检测和数据库构建，首次启动自动配置
- **用户体验提升**：界面显示数据库构建状态，实时反馈处理进度
- **代码结构优化**：清理冗余文件，优化项目结构，提升维护性
- **依赖管理完善**：精简并优化依赖包配置，减少安装体积
- **文档更新完善**：全面更新README和使用说明，提供详细配置指南

#### v1.5.1
- 代码清理：将所有print语句替换为logger调用，提升日志管理质量
- 错误处理优化：统一使用logger.error记录错误信息
- 调试信息优化：将调试相关输出改为logger.debug
- 导入修复：修复所有模块的logger导入问题，确保日志功能正常
- 代码规范：移除TODO注释，提升代码整洁度
- 稳定性提升：修复logger相关的运行时错误
- 增加自定义AI模型功能
- 修复已知BUG
- 优化程序启动速度及UI

#### v1.5.0 
- 代码优化：移除冗余代码，提升性能
- 依赖更新：升级核心依赖包版本
- 界面优化：修复"六爻"选项显示问题
- 功能精简：移除不常用功能，专注核心体验
- 稳定性提升：修复已知问题，增强系统稳定性

#### v1.4.0
- 全面重构代码，采用模块化设计
- 新增梅花易数分析功能
- 新增太乙神数分析功能
- 新增分析结果导出为PDF/Word功能
- 优化UI设计，采用iOS风格的简洁界面
- 添加流畅的动画效果
- 优化网络请求处理，支持请求缓存
- 修复已知BUG

#### v1.3.0
- 新增河洛理数分析功能
- 新增玄空择日分析功能
- 新增紫微斗数分析功能
- 全面美化用户界面，采用现代化设计
- 优化代码结构和性能

#### v1.2.0
- 新增金口诀分析功能
- 新增八字命理分析功能
- 添加连续对话模式
- 添加自定义提示词功能

#### v1.1.0
- 新增奇门遁甲分析功能
- 新增大六壬分析功能
- 优化UI交互体验

## 编译为无命令行窗口的程序

可以使用PyInstaller将程序编译为独立的可执行文件，无需显示命令行窗口。以下是编译步骤：

```bash
pyinstaller --noconsole --onefile main.py
```

编译完成后，可执行文件将位于dist目录中。

## 贡献指南

欢迎贡献代码或提出建议！请遵循以下步骤：

1. Fork本仓库
2. 创建您的特性分支 (`git checkout -b feature/amazing-feature`)
3. 提交您的更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 打开一个Pull Request

## 许可证

本项目采用MIT许可证 - 详情请参阅LICENSE文件